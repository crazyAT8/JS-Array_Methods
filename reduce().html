<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reduce Array Method</title>
    <style>
        body {
            border: 1px solid black;
            border-radius: 15px;
            box-shadow: 5px 5px;
        }
        h1 {
            font-family: monospace;
            padding-left: 20px;
            margin-left: 40px;
            border: 1px solid black;
            border-radius: 15px;
            box-shadow: 5px 5px;
            width: 40%;
        }
        #syntax {
            border: 1px solid black;
            padding: 3px;
            border-radius: 5px;
        }
        td {
            border: 1px solid black;
            border-radius: 5px;
            padding-left: 5px;
        }
        th {
            border: 1px solid black;
            border-radius: 5px;
        }
        .table1 {
            border: 1px solid black;
            border-radius: 5px;
            margin-left: 100px;
            padding: 5px;
        }
        #table2 {
            border: 1px solid black;
            border-radius: 5px;
            margin-left: 100px;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>Reduce Array Method</h1>
    <pre>
        <b><u>Definition</u></b>:                                                   <b><u>Similar</u></b>:
                this method executes a reducer function 
                    for array element 
                        it returns a single value: 
                            the function's accumulated result 
                does not execute the function 
                    for empty array elements 
                        and does not change the original array 
                basically the reduce() method 
                    takes/loops through an array of objects and 
                        reduces it down to a single value 
                takes 2 parameters 
                    1) a function 
                        parameters 
                            a) accumulator what we are reducing our value down to 
                                if you do not pass a default parameter 
                                    then it will set the first value as the default value
                            b) the individual item
                                what ever this returns will be the total for the next iteration 
                    2) starting point 

        <b><u>Syntax</u></b>

            <span id="syntax"><i>array.reduce(function(total, currentValue, currentIndex, arr), initialValue)</i></span>

        <b><u>Parameters</u></b>
        <table class="table1">
            <tbody>
                <tr>
                    <th>Parameter</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><i>function()</i></td>
                    <td>
                        Required.
                        A function to run for each element in the array
                    </td>
                </tr>
                <tr>
                    <table class="table1">
                        <tbody>
                            <tr>
                                <th>Reducer function parameters:</th>
                            </tr>
                            <tr>
                                <td><i>total</i></td>
                                <td>
                                    Required.
                                    The initialValue, or the previously returned value of the function.
                                </td>
                            </tr>
                            <tr>
                                <td><i>currentValue</i></td>
                                <td>
                                    Required.
                                    The value of the current element.
                                </td>
                            </tr>
                            <tr>
                                <td><i>currentIndex</i></td>
                                <td>
                                    Optional. Default undefined 
                                    The index of the current element.
                                </td>
                            </tr>
                            <tr>
                                <td><i>arr</i></td>
                                <td>
                                    Optional.
                                    The array the current element belongs to.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </tr>
                <tr>
                    <td><i>initialValue</i></td>
                    <td>
                        Optional.
                        A value to be passed to the function as the initial value.
                    </td>
                </tr>
            </tbody>
        </table>

        <b><u>Return Value</u></b>
        <table id="table2">
            <tbody>
                <tr>
                    <td>
                        The accumulated result from the last call of the callback function.
                    </td>
                </tr>
            </tbody>
        </table>

        <b><u>Example:</u></b>
                                    
                <b>Return Value:</b> <span id="test"></span>
                              <span id="test1"></span>
                              <span id="test12"></span>
                              <span id="test13"></span>
                              <span id="test2"></span>

        <b><u>Code:</u></b>
                const numbers = [187, 88, 99];

                function myFunction(total, num) {
                    return total - num;
                }

                document.getElementById("test").innerHTML = numbers.reduce(myFunction);

                // You pass a function as an argument into the reduce method 
                //  the function basically subtracting two values 
                //   and you attach that on to the variable that reps an array of numbers 
                //      which subtracts all of them 
                //          returning the sum of the equation 
    </pre>

    <script>
        const numbers = [13, 2, 5];

        function myFunction(total, num) {
            return total + num;
        }

        document.getElementById("test").innerHTML = numbers.reduce(myFunction);

        const numbers2 = [13, 2, 5]; 

        const sum = numbers2.reduce((total, number, index, array) => {
            document.getElementById("test12").innerHTML = index;                                             // some how not the same
            console.log(index)
            document.getElementById("test13").innerHTML = array
            console.log(array)
            return total + number
        }, 0)

        console.log(sum);                                                                        // these two are the same
        document.getElementById("test1").innerHTML = sum;

// Think a shopping cart full of items
// we need to calculate the total
        const items = [
            { name: "Rice", price: 5 },
            { name: "Book", price: 20 },
            { name: "Chicken", price: 10 },
            { name: "Monitor", price: 100 },
        ]

        // let totalPrice = 0
        // items.forEach(item => {
        //     totalPrice += item.price
        // })

        const totalPrice = items.reduce((total, item) => {
            console.log(`Total: ${total}`);                     // displays the Total every loop
            console.log(`Item: ${item.price}`);                 // displays the price every loop
            return total + item.price;
        }, 0)

        console.log(totalPrice);

        /* Output
            Loop 1 Total: 0
                    Item: 5
            Loop 2 Total: 5 
                    Item: 20
            Loop 3 Total: 25 
                    Item: 10
            Loop 4 Total: 35 
                    Item: 100
                    135
        */

// Group people by age
// create an object for every single age
// if the ages are the same, they're in the same obj

        const people = [
            {name: "Kyle", age: 26 },
            {name: "John", age: 31 },
            {name: "Sally", age: 42 },
            {name: "Jill", age: 42 },
        ]

        const result = people.reduce((groupedPeople, person) => {
            const age = person.age
            if (groupedPeople[age] == null) groupedPeople[age] = []     // saying if there are no two people at that current age then put them into their own array
            groupedPeople[age].push(person)                            // anyone at that new age will be pushed to the new age
            return groupedPeople                                        // returning the obj which is all the people grouped as they should be
        }, {});

        console.log(result);                                           // not the same result
        document.getElementById("test2").innerHTML = result;

        // you can do this with the forEach function
        //  but its easier to use reduce bc we are trying to center the array around one topic value

        


    </script>
</body>
</html>